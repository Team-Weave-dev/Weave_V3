# ìœ„ì ¯ ë°ì´í„° í†µí•© ì•„í‚¤í…ì²˜ ì„¤ê³„

## ğŸ“‹ ê°œìš”

ìº˜ë¦°ë”, ì„¸ë¬´ì¼ì •, í• ì¼ ìœ„ì ¯ì˜ ë°ì´í„°ë¥¼ í†µí•©í•˜ì—¬ í•˜ë‚˜ì˜ ìº˜ë¦°ë” ë·°ì—ì„œ ëª¨ë“  ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì‹œìŠ¤í…œ ì„¤ê³„ì…ë‹ˆë‹¤. í˜„ì¬ëŠ” ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„í•˜ë˜, í–¥í›„ DB ì—°ë™ì„ ìœ„í•œ í™•ì¥ ê°€ëŠ¥í•œ êµ¬ì¡°ë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.

## ğŸ¯ ì„¤ê³„ ëª©í‘œ

1. **í†µí•©ëœ ì¼ì • ê´€ë¦¬**: ëª¨ë“  ì¼ì •/í• ì¼/ì„¸ë¬´ ì •ë³´ë¥¼ í•œ ê³³ì—ì„œ í™•ì¸
2. **ìœ ì—°í•œ í•„í„°ë§**: ì†ŒìŠ¤ë³„, ìš°ì„ ìˆœìœ„ë³„, ìƒíƒœë³„ í•„í„°ë§ ì§€ì›
3. **ì„±ëŠ¥ ìµœì í™”**: ëŒ€ëŸ‰ ë°ì´í„°ë„ ë¹ ë¥´ê²Œ ì²˜ë¦¬
4. **í™•ì¥ ê°€ëŠ¥í•œ êµ¬ì¡°**: ìƒˆë¡œìš´ ìœ„ì ¯ ì‰½ê²Œ ì¶”ê°€ ê°€ëŠ¥
5. **ë°ì´í„° ì¼ê´€ì„±**: ì¤‘ì•™í™”ëœ ë™ê¸°í™” ë©”ì»¤ë‹ˆì¦˜
6. **DB ë§ˆì´ê·¸ë ˆì´ì…˜ ì¤€ë¹„**: ìµœì†Œí•œì˜ ì½”ë“œ ë³€ê²½ìœ¼ë¡œ DB ì—°ë™ ê°€ëŠ¥

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 1. ë ˆì´ì–´ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    UI Layer                         â”‚
â”‚         (CalendarWidget, IntegratedView)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Service Layer                       â”‚
â”‚         (IntegratedCalendarService)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Repository Layer                      â”‚
â”‚   (CalendarRepo, TaxRepo, TodoRepo)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Data Source Layer                     â”‚
â”‚   (LocalStorage â†’ IndexedDB â†’ REST API)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. ë°ì´í„° í”Œë¡œìš°

```
User Action â†’ UI Component â†’ Service â†’ Repository â†’ DataSource
                â†“                           â†“
           State Update â† Notification â† Cache Update
```

## ğŸ“Š í•µì‹¬ ë°ì´í„° ëª¨ë¸

### UnifiedCalendarItem

í†µí•© ìº˜ë¦°ë” ì•„ì´í…œì˜ í‘œì¤€ ì¸í„°í˜ì´ìŠ¤:

```typescript
interface UnifiedCalendarItem {
  id: string;                    // ê³ ìœ  ì‹ë³„ì (source-originalId)
  source: 'calendar' | 'tax' | 'todo';  // ë°ì´í„° ì¶œì²˜
  type: 'event' | 'deadline' | 'task';  // ì•„ì´í…œ ìœ í˜•
  
  // ê³µí†µ í•„ë“œ
  title: string;                 // ì œëª©
  date: Date;                    // ë‚ ì§œ
  description?: string;          // ì„¤ëª…
  
  // ì‹œê°„ ì •ë³´
  startTime?: string;            // ì‹œì‘ ì‹œê°„ (HH:mm)
  endTime?: string;              // ì¢…ë£Œ ì‹œê°„ (HH:mm)
  allDay: boolean;               // ì¢…ì¼ ì—¬ë¶€
  
  // ì¤‘ìš”ë„/ìš°ì„ ìˆœìœ„
  priority: 'critical' | 'high' | 'medium' | 'low';
  
  // ìƒíƒœ
  status: 'pending' | 'in-progress' | 'completed' | 'overdue';
  
  // ì¹´í…Œê³ ë¦¬
  category?: string;             // ì¹´í…Œê³ ë¦¬/ì„¹ì…˜
  tags?: string[];               // íƒœê·¸ ëª©ë¡
  
  // ì›ë³¸ ë°ì´í„° ì°¸ì¡°
  originalData: CalendarEvent | TaxDeadline | TodoTask;
  
  // ì‹œê°í™” ì†ì„±
  color: string;                 // í‘œì‹œ ìƒ‰ìƒ
  icon?: string;                 // ì•„ì´ì½˜ ì´ë¦„
}
```

## ğŸ”„ ë°ì´í„° ë³€í™˜ ì–´ëŒ‘í„°

### Adapter Pattern êµ¬í˜„

ê° ìœ„ì ¯ì˜ ë°ì´í„°ë¥¼ í†µí•© í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ì–´ëŒ‘í„°:

#### CalendarDataAdapter
- CalendarEvent â†’ UnifiedCalendarItem
- ì‹œê°„ ì •ë³´ ë° ë°˜ë³µ ì¼ì • ì²˜ë¦¬
- ì¹´í…Œê³ ë¦¬ ë° ìœ„ì¹˜ ì •ë³´ ë§¤í•‘

#### TaxDataAdapter
- TaxDeadline â†’ UnifiedCalendarItem
- D-day ê³„ì‚° ë° ì¤‘ìš”ë„ ë§¤í•‘
- ì„¸ë¬´ ì¹´í…Œê³ ë¦¬ë³„ ìƒ‰ìƒ ì§€ì •
- ì›”ë³„/ë¶„ê¸°ë³„/ì—°ê°„ ë°˜ë³µ ì²˜ë¦¬

#### TodoDataAdapter
- TodoTask â†’ UnifiedCalendarItem
- ìš°ì„ ìˆœìœ„ ë§¤í•‘ (p1â†’critical, p2â†’high, etc.)
- ì„¹ì…˜ ì •ë³´ë¥¼ ì¹´í…Œê³ ë¦¬ë¡œ ë³€í™˜
- í•˜ìœ„ ì‘ì—… ì²˜ë¦¬ ë¡œì§

## ğŸ“¦ Repository Pattern

### ì¶”ìƒí™”ëœ ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ

```typescript
interface IRepository<T> {
  findAll(): Promise<T[]>;
  findById(id: string): Promise<T | null>;
  findByDateRange(start: Date, end: Date): Promise<T[]>;
  create(data: Partial<T>): Promise<T>;
  update(id: string, data: Partial<T>): Promise<T>;
  delete(id: string): Promise<void>;
  subscribe(callback: (data: T[]) => void): () => void;
}
```

### êµ¬í˜„ ì „ëµ

1. **ìºì‹± ë©”ì»¤ë‹ˆì¦˜**: ë¹ˆë²ˆí•œ ì¡°íšŒë¥¼ ìœ„í•œ ë©”ëª¨ë¦¬ ìºì‹œ
2. **êµ¬ë…/ë°œí–‰ íŒ¨í„´**: ì‹¤ì‹œê°„ ë°ì´í„° ì—…ë°ì´íŠ¸
3. **ë°°ì¹˜ ì—…ë°ì´íŠ¸**: ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•œ ì¼ê´„ ì²˜ë¦¬
4. **ì¶©ëŒ í•´ê²°**: ë™ì‹œ ìˆ˜ì • ì‹œ ì²˜ë¦¬ ì „ëµ

## ğŸ”Œ ë°ì´í„° ì†ŒìŠ¤ ì „ëµ

### ì ì§„ì  ë§ˆì´ê·¸ë ˆì´ì…˜ ê²½ë¡œ

#### Phase 1: LocalStorage (í˜„ì¬)
```typescript
{
  type: 'localStorage',
  syncInterval: 0  // ì‹¤ì‹œê°„ ë™ê¸°í™”
}
```

#### Phase 2: IndexedDB (ì¤‘ê°„ ë‹¨ê³„)
```typescript
{
  type: 'indexedDB',
  dbName: 'WeaveCalendar',
  version: 1
}
```

#### Phase 3: Hybrid (ì˜¤í”„ë¼ì¸ ìš°ì„ )
```typescript
{
  type: 'hybrid',
  local: 'indexedDB',
  remote: 'api',
  syncStrategy: 'offline-first'
}
```

#### Phase 4: REST API (ìµœì¢…)
```typescript
{
  type: 'api',
  baseUrl: 'https://api.example.com',
  auth: 'bearer',
  realtime: true
}
```

## ğŸ¨ UI í†µí•© ì „ëµ

### ìº˜ë¦°ë” ë·° ë Œë”ë§

#### ì›”ë³„ ë·°
- ë‚ ì§œë³„ ì•„ì´í…œ ê·¸ë£¹í•‘
- ìµœëŒ€ 3ê°œ í‘œì‹œ + "ë”ë³´ê¸°"
- ì†ŒìŠ¤ë³„ ìƒ‰ìƒ ì½”ë”©

#### ì£¼ë³„ ë·°
- ì‹œê°„ëŒ€ë³„ ë°°ì¹˜
- ì¤‘ë³µ ì‹œê°„ ì²˜ë¦¬
- ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì§€ì›

#### ì¼ë³„ ë·°
- ìƒì„¸ ì‹œê°„ í‘œì‹œ
- ì¢…ì¼ ì¼ì • ë³„ë„ ì˜ì—­
- ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸

#### ì•„ì  ë‹¤ ë·°
- ë¦¬ìŠ¤íŠ¸ í˜•íƒœ í‘œì‹œ
- í•„í„°ë§ ë° ê²€ìƒ‰
- ë¬´í•œ ìŠ¤í¬ë¡¤

### ì‹œê°ì  êµ¬ë¶„

```typescript
const sourceStyles = {
  calendar: {
    color: '#3b82f6',  // blue
    icon: 'calendar',
    border: 'border-l-2 border-blue-500'
  },
  tax: {
    color: '#ef4444',  // red
    icon: 'receipt',
    border: 'border-l-2 border-red-500'
  },
  todo: {
    color: '#10b981',  // green
    icon: 'check-circle',
    border: 'border-l-2 border-green-500'
  }
};
```

## âš¡ ì„±ëŠ¥ ìµœì í™”

### 1. ë©”ëª¨ì´ì œì´ì…˜
- ë°ì´í„° ë³€í™˜ ê²°ê³¼ ìºì‹±
- ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ ìµœì í™”
- ê³„ì‚° ë¹„ìš©ì´ ë†’ì€ í•¨ìˆ˜ ìºì‹±

### 2. ì¸ë±ì‹±
- ë‚ ì§œë³„ ì¸ë±ìŠ¤: O(1) ì¡°íšŒ
- ì¹´í…Œê³ ë¦¬ë³„ ì¸ë±ìŠ¤: ë¹ ë¥¸ í•„í„°ë§
- ìš°ì„ ìˆœìœ„ë³„ ì¸ë±ìŠ¤: ì •ë ¬ ìµœì í™”

### 3. ê°€ìƒ ìŠ¤í¬ë¡¤
- ëŒ€ëŸ‰ ë°ì´í„° ë Œë”ë§ ìµœì í™”
- ë·°í¬íŠ¸ ê¸°ë°˜ ë Œë”ë§
- ë™ì  ë†’ì´ ê³„ì‚°

### 4. ë°°ì¹˜ ì—…ë°ì´íŠ¸
- 16ms (60fps) ê°„ê²© ì—…ë°ì´íŠ¸
- ì—¬ëŸ¬ ë³€ê²½ì‚¬í•­ ì¼ê´„ ì²˜ë¦¬
- DOM ì¡°ì‘ ìµœì†Œí™”

## ğŸ”„ ë™ê¸°í™” ë©”ì»¤ë‹ˆì¦˜

### ì˜¤í”„ë¼ì¸ ìš°ì„  ì „ëµ

1. **ë¡œì»¬ ìš°ì„  ì ìš©**: ì¦‰ê°ì ì¸ UI ì—…ë°ì´íŠ¸
2. **ë°±ê·¸ë¼ìš´ë“œ ë™ê¸°í™”**: ì„œë²„ì™€ ë¹„ë™ê¸° ë™ê¸°í™”
3. **ì¶©ëŒ ê°ì§€**: ë²„ì „ ê´€ë¦¬ ë° íƒ€ì„ìŠ¤íƒ¬í”„
4. **ìë™ í•´ê²°**: ë¨¸ì§€ ì „ëµ ë˜ëŠ” ì‚¬ìš©ì ì„ íƒ

### ì¶©ëŒ í•´ê²° ì „ëµ

```typescript
enum ConflictResolution {
  LOCAL_WINS = 'local-wins',      // ë¡œì»¬ ìš°ì„ 
  SERVER_WINS = 'server-wins',    // ì„œë²„ ìš°ì„ 
  MERGE = 'merge',                // ìë™ ë³‘í•©
  USER_CHOICE = 'user-choice'     // ì‚¬ìš©ì ì„ íƒ
}
```

## ğŸ—„ï¸ DB ìŠ¤í‚¤ë§ˆ ì„¤ê³„

### PostgreSQL ìŠ¤í‚¤ë§ˆ

#### í•µì‹¬ í…Œì´ë¸”
- `users`: ì‚¬ìš©ì ì •ë³´
- `calendar_events`: ìº˜ë¦°ë” ì´ë²¤íŠ¸
- `tax_deadlines`: ì„¸ë¬´ ë§ˆê°ì¼
- `todo_tasks`: í• ì¼ ëª©ë¡
- `todo_sections`: í• ì¼ ì„¹ì…˜

#### í†µí•© ë·°
```sql
CREATE VIEW unified_calendar_items AS
SELECT ... FROM calendar_events
UNION ALL
SELECT ... FROM tax_deadlines
UNION ALL
SELECT ... FROM todo_tasks;
```

#### ì¸ë±ìŠ¤ ì „ëµ
- ë‚ ì§œ ê¸°ë°˜ ì¸ë±ìŠ¤: `(user_id, date)`
- ì¹´í…Œê³ ë¦¬ ì¸ë±ìŠ¤: `(user_id, category)`
- ìƒíƒœ ì¸ë±ìŠ¤: `(user_id, status)`

## ğŸ”Œ API ì„¤ê³„

### RESTful ì—”ë“œí¬ì¸íŠ¸

```
GET    /api/calendar/items?start=&end=&sources=&priorities=
POST   /api/calendar/items
PUT    /api/calendar/items/:id
DELETE /api/calendar/items/:id
GET    /api/calendar/items/search?q=
POST   /api/calendar/items/batch
```

### WebSocket ì´ë²¤íŠ¸

```typescript
// í´ë¼ì´ì–¸íŠ¸ â†’ ì„œë²„
{
  type: 'subscribe',
  userId: string,
  filters: CalendarFilters
}

// ì„œë²„ â†’ í´ë¼ì´ì–¸íŠ¸
{
  type: 'item_created' | 'item_updated' | 'item_deleted',
  data: UnifiedCalendarItem
}
```

## ğŸš€ êµ¬í˜„ ë¡œë“œë§µ

### Phase 1: ë°ì´í„° í†µí•© ë ˆì´ì–´ (1-2ì¼)
- [x] UnifiedCalendarItem íƒ€ì… ì •ì˜
- [ ] ê° ìœ„ì ¯ ì–´ëŒ‘í„° êµ¬í˜„
- [ ] IntegratedCalendarManager êµ¬í˜„
- [ ] ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‘ì„±

### Phase 2: React í†µí•© (1-2ì¼)
- [ ] useIntegratedCalendar í›… êµ¬í˜„
- [ ] í•„í„°ë§ ì‹œìŠ¤í…œ êµ¬ì¶•
- [ ] ìƒíƒœ ë™ê¸°í™” ë©”ì»¤ë‹ˆì¦˜
- [ ] Context Provider êµ¬í˜„

### Phase 3: UI í†µí•© (2-3ì¼)
- [ ] í†µí•© ìº˜ë¦°ë” ë·° ì»´í¬ë„ŒíŠ¸
- [ ] ì•„ì´í…œ ë Œë”ë§ ìµœì í™”
- [ ] ì¸í„°ë™ì…˜ ì²˜ë¦¬ (í´ë¦­, ë“œë˜ê·¸)
- [ ] ë°˜ì‘í˜• ë””ìì¸

### Phase 4: ì„±ëŠ¥ ìµœì í™” (1-2ì¼)
- [ ] ë©”ëª¨ì´ì œì´ì…˜ ì ìš©
- [ ] ì¸ë±ì‹± ì‹œìŠ¤í…œ êµ¬ì¶•
- [ ] ë°°ì¹˜ ì—…ë°ì´íŠ¸ êµ¬í˜„
- [ ] ê°€ìƒ ìŠ¤í¬ë¡¤ ì ìš©

### Phase 5: í…ŒìŠ¤íŠ¸ ë° ì•ˆì •í™” (1-2ì¼)
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] í†µí•© í…ŒìŠ¤íŠ¸
- [ ] ì„±ëŠ¥ í”„ë¡œíŒŒì¼ë§
- [ ] ë²„ê·¸ ìˆ˜ì • ë° ìµœì í™”

### Phase 6: DB ë§ˆì´ê·¸ë ˆì´ì…˜ ì¤€ë¹„ (ì„ íƒ)
- [ ] API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„
- [ ] WebSocket ì„œë²„ ì„¤ì •
- [ ] ë™ê¸°í™” ë¡œì§ êµ¬í˜„
- [ ] ë°°í¬ ë° ëª¨ë‹ˆí„°ë§

## ğŸ“ˆ ì˜ˆìƒ íš¨ê³¼

1. **ì‚¬ìš©ì ê²½í—˜ í–¥ìƒ**: ëª¨ë“  ì¼ì •ì„ í•œëˆˆì— í™•ì¸
2. **ê°œë°œ íš¨ìœ¨ì„±**: ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸
3. **ìœ ì§€ë³´ìˆ˜ì„±**: ëª…í™•í•œ ë ˆì´ì–´ ë¶„ë¦¬
4. **í™•ì¥ì„±**: ìƒˆë¡œìš´ ìœ„ì ¯ ì‰½ê²Œ ì¶”ê°€
5. **ì„±ëŠ¥**: ëŒ€ëŸ‰ ë°ì´í„°ë„ ë¹ ë¥¸ ì²˜ë¦¬

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

- **Frontend**: React, TypeScript, Next.js 15
- **State Management**: React Context + Custom Hooks
- **Styling**: Tailwind CSS, shadcn/ui
- **Data Storage**: LocalStorage â†’ IndexedDB â†’ PostgreSQL
- **Real-time**: WebSocket / Server-Sent Events
- **Testing**: Jest, React Testing Library
- **Build**: Vite / Next.js

## ğŸ“š ì°¸ê³  ìë£Œ

- [Repository Pattern in TypeScript](https://martinfowler.com/eaaCatalog/repository.html)
- [Offline-First Web Apps](https://offlinefirst.org/)
- [WebSocket API](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket)
- [IndexedDB API](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API)