/* CSS 계층 구조를 통한 우선순위 관리 - !important 사용 금지 */
@layer third-party, base, components, utilities;

/* 서드파티 라이브러리를 가장 낮은 우선순위로 배치 */
@layer third-party {
  @import "react-day-picker/dist/style.css";
}

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 0 0% 10%;
    --card: 0 0% 100%;
    --card-foreground: 0 0% 10%;
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 10%;
    --primary: 175.748 55.9471% 55.4902%;
    --primary-foreground: 0 0% 98.0392%;
    --secondary: 176.2832 66.8639% 66.8627%;
    --secondary-foreground: 0 0% 100%;
    --muted: 175.3846 68.4211% 92.549%;
    --muted-foreground: 0 0% 20%;
    /* accent 색상 제거 - 호버 효과는 bg-primary-foreground + text-primary 사용 */
    /* --accent: 0 100% 99.0196%; */
    /* --accent-foreground: 175.3846 68.4211% 92.549%; */
    --destructive: 351.8841 100% 40.5882%;
    --destructive-foreground: 0 0% 100%;

    /* 시맨틱 상태 색상 - Badge 컴포넌트용 */
    --success: 142 76% 36%;  /* 녹색 */
    --success-foreground: 0 0% 100%;
    --warning: 38 92% 50%;  /* 주황색 */
    --warning-foreground: 0 0% 100%;
    --error: 351.8841 100% 40.5882%;  /* destructive와 동일 */
    --error-foreground: 0 0% 100%;
    --info: 210 100% 50%;  /* 파란색 */
    --info-foreground: 0 0% 100%;

    /* 프로젝트 상태 색상 - 연한 팔레트 */
    --project-review: 48 65% 75%;  /* 연한 노란색 - 검토 */
    --project-review-foreground: 0 0% 20%;
    --project-complete: 142 50% 68%;  /* 연한 녹색 - 완료 */
    --project-complete-foreground: 0 0% 20%;
    --project-cancelled: 0 60% 75%;  /* 연한 빨간색 - 취소 */
    --project-cancelled-foreground: 0 0% 100%;
    --project-planning: 0 0% 82%;  /* 연한 회색 - 기획 */
    --project-planning-foreground: 0 0% 30%;
    --project-onhold: 25 65% 72%;  /* 연한 주황색 - 보류 */
    --project-onhold-foreground: 0 0% 20%;
    --project-inprogress: 217 60% 75%;  /* 연한 파란색 - 진행중 */
    --project-inprogress-foreground: 0 0% 20%;

    --border: 220 13.0435% 90.9804%;
    --input: 174.7826 58.9744% 92.3529%;
    --ring: 175.748 55.9471% 55.4902%;
    --chart-1: 175.3846 68.4211% 92.549%;
    --chart-2: 175.7143 67.3077% 79.6078%;
    --chart-3: 176.2832 66.8639% 66.8627%;
    --chart-4: 175.9732 60.8163% 51.9608%;
    --chart-5: 176.0294 77.2727% 34.5098%;
    --sidebar: 0 0% 100%;
    --sidebar-foreground: 0 0% 10%;
    --sidebar-primary: 0 0% 10%;
    --sidebar-primary-foreground: 0 0% 98.0392%;
    /* --sidebar-accent: 174.7826 58.9744% 92.3529%; */
    /* --sidebar-accent-foreground: 0 0% 10%; */
    --sidebar-border: 220 13.0435% 90.9804%;
    --sidebar-ring: 175.748 55.9471% 55.4902%;
    --font-sans:
      ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
      Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif,
      "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
      "Noto Color Emoji";
    --font-serif: ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;
    --font-mono:
      ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",
      "Courier New", monospace;
    --radius: 1rem;
    --shadow-2xs: 0.5px 2px 9px 0px hsl(0 0% 0% / 0.06);
    --shadow-xs: 0.5px 2px 9px 0px hsl(0 0% 0% / 0.06);
    --shadow-sm:
      0.5px 2px 9px 0px hsl(0 0% 0% / 0.11),
      0.5px 1px 2px -1px hsl(0 0% 0% / 0.11);
    --shadow:
      0.5px 2px 9px 0px hsl(0 0% 0% / 0.11),
      0.5px 1px 2px -1px hsl(0 0% 0% / 0.11);
    --shadow-md:
      0.5px 2px 9px 0px hsl(0 0% 0% / 0.11),
      0.5px 2px 4px -1px hsl(0 0% 0% / 0.11);
    --shadow-lg:
      0.5px 2px 9px 0px hsl(0 0% 0% / 0.11),
      0.5px 4px 6px -1px hsl(0 0% 0% / 0.11);
    --shadow-xl:
      0.5px 2px 9px 0px hsl(0 0% 0% / 0.11),
      0.5px 8px 10px -1px hsl(0 0% 0% / 0.11);
    --shadow-2xl: 0.5px 2px 9px 0px hsl(0 0% 0% / 0.28);
    --tracking-normal: 0em;
    --spacing: 0.25rem;
  }

  .dark {
    --background: 240 1.9608% 10%;
    --foreground: 0 0% 98.0392%;
    --card: 240 1.9608% 10%;
    --card-foreground: 0 0% 98.0392%;
    --popover: 0 0% 14.902%;
    --popover-foreground: 0 0% 98.0392%;
    --primary: 0 0% 89.8039%;
    --primary-foreground: 240 1.9608% 10%;
    --secondary: 0 0% 14.902%;
    --secondary-foreground: 0 0% 98.0392%;
    --muted: 0 0% 14.902%;
    --muted-foreground: 0 0% 63.1373%;
    /* accent 색상 제거 - 호버 효과는 bg-primary-foreground + text-primary 사용 */
    /* --accent: 0 0% 25.098%; */
    /* --accent-foreground: 0 0% 98.0392%; */
    --destructive: 358.8312 100% 69.8039%;
    --destructive-foreground: 0 0% 98.0392%;

    /* 시맨틱 상태 색상 - Badge 컴포넌트용 (다크 모드) */
    --success: 142 70% 45%;  /* 녹색 */
    --success-foreground: 0 0% 98.0392%;
    --warning: 38 85% 55%;  /* 주황색 */
    --warning-foreground: 0 0% 10%;
    --error: 358.8312 100% 69.8039%;  /* destructive와 동일 */
    --error-foreground: 0 0% 98.0392%;
    --info: 210 90% 60%;  /* 파란색 */
    --info-foreground: 0 0% 98.0392%;

    /* 프로젝트 상태 색상 (다크 모드 - 연한 팔레트) */
    --project-review: 48 50% 40%;  /* 연한 노란색 - 검토 */
    --project-review-foreground: 0 0% 95%;
    --project-complete: 142 40% 35%;  /* 연한 녹색 - 완료 */
    --project-complete-foreground: 0 0% 95%;
    --project-cancelled: 0 45% 40%;  /* 연한 빨간색 - 취소 */
    --project-cancelled-foreground: 0 0% 95%;
    --project-planning: 0 0% 25%;  /* 연한 회색 - 기획 */
    --project-planning-foreground: 0 0% 90%;
    --project-onhold: 25 50% 38%;  /* 연한 주황색 - 보류 */
    --project-onhold-foreground: 0 0% 95%;
    --project-inprogress: 217 45% 40%;  /* 연한 파란색 - 진행중 */
    --project-inprogress-foreground: 0 0% 95%;

    --border: 0 0% 15.6863%;
    --input: 0 0% 20.3922%;
    --ring: 0 0% 45.098%;
    --chart-1: 211.9266 100% 78.6275%;
    --chart-2: 217.3404 91.2621% 59.6078%;
    --chart-3: 221.5842 86.3248% 54.1176%;
    --chart-4: 223.75 78.6885% 47.8431%;
    --chart-5: 226.4789 69.6078% 40%;
    --sidebar: 240 1.9608% 10%;
    --sidebar-foreground: 0 0% 98.0392%;
    --sidebar-primary: 225.4286 84% 49.0196%;
    --sidebar-primary-foreground: 0 0% 98.0392%;
    /* --sidebar-accent: 0 0% 14.902%; */
    /* --sidebar-accent-foreground: 0 0% 98.0392%; */
    --sidebar-border: 0 0% 15.6863%;
    --sidebar-ring: 0 0% 32.1569%;
    --font-sans:
      ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
      Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif,
      "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
      "Noto Color Emoji";
    --font-serif: ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;
    --font-mono:
      ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",
      "Courier New", monospace;
    --radius: 1rem;
    --shadow-2xs: 0.5px 2px 9px 0px hsl(0 0% 0% / 0.06);
    --shadow-xs: 0.5px 2px 9px 0px hsl(0 0% 0% / 0.06);
    --shadow-sm:
      0.5px 2px 9px 0px hsl(0 0% 0% / 0.11),
      0.5px 1px 2px -1px hsl(0 0% 0% / 0.11);
    --shadow:
      0.5px 2px 9px 0px hsl(0 0% 0% / 0.11),
      0.5px 1px 2px -1px hsl(0 0% 0% / 0.11);
    --shadow-md:
      0.5px 2px 9px 0px hsl(0 0% 0% / 0.11),
      0.5px 2px 4px -1px hsl(0 0% 0% / 0.11);
    --shadow-lg:
      0.5px 2px 9px 0px hsl(0 0% 0% / 0.11),
      0.5px 4px 6px -1px hsl(0 0% 0% / 0.11);
    --shadow-xl:
      0.5px 2px 9px 0px hsl(0 0% 0% / 0.11),
      0.5px 8px 10px -1px hsl(0 0% 0% / 0.11);
    --shadow-2xl: 0.5px 2px 9px 0px hsl(0 0% 0% / 0.28);
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }

  /* 헤더 내비게이션 포커스 링 제거 - 계층 우선순위로 관리 */
  nav button,
  nav a {
    @apply focus:outline-none focus-visible:outline-none focus-visible:ring-0 focus-visible:ring-offset-0;
  }
}


/* 🗓️ React Day Picker 커스텀 스타일 - 높은 우선순위 레이어 */
@layer components {
  /* CSS 변수 오버라이드 - Primary 색상 시스템 통합 */
  :root {
    --rdp-accent-color: hsl(var(--primary));
    --rdp-accent-color-dark: hsl(var(--primary));
    --rdp-background-color: hsl(var(--background));
    --rdp-outline: 2px solid hsl(var(--primary));
    --rdp-outline-selected: 2px solid hsl(var(--primary));
  }

  .dark {
    --rdp-accent-color: hsl(var(--primary));
    --rdp-accent-color-dark: hsl(var(--primary));
    --rdp-background-color: hsl(var(--background));
    --rdp-outline: 2px solid hsl(var(--primary));
    --rdp-outline-selected: 2px solid hsl(var(--primary));
  }

  /* 캘린더 스타일 - 특이성 증가로 우선순위 확보 */
  .rdp-root .rdp-day_today,
  .rdp-day_today {
    border: 1px solid hsl(var(--primary));
  }

  .rdp-root .rdp-day_today:focus,
  .rdp-root .rdp-day_today:focus-visible,
  .rdp-root .rdp-day_today.rdp-day_focused {
    border-color: hsl(var(--primary));
    outline: 2px solid hsl(var(--primary));
    outline-offset: 1px;
  }

  .rdp-root .rdp-day_selected,
  .rdp-root .rdp-day_selected:hover,
  .rdp-root .rdp-day_selected:focus {
    background-color: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
    border-color: hsl(var(--primary));
  }

  /* 네비게이션 포커스 스타일 - 계층 우선순위로 관리 */
  nav button:focus,
  nav button:focus-visible,
  nav button:active,
  nav a:focus,
  nav a:focus-visible,
  nav a:active {
    outline: none;
    box-shadow: none;
    border-color: transparent;
    --tw-ring-shadow: 0 0 #0000;
    --tw-ring-offset-shadow: 0 0 #0000;
  }

  /* 상태표시 컴포넌트 기본 색상 표준화 */
  .badge-default {
    background-color: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
  }

  .badge-default:hover {
    background-color: hsl(var(--primary) / 0.8);
  }
}

@layer utilities {
  /* Progress bar shimmer animation */
  @keyframes shimmer {
    0% {
      transform: translateX(-100%);
    }
    100% {
      transform: translateX(100%);
    }
  }

  .animate-shimmer {
    animation: shimmer 2s infinite;
  }

  /* Drag and drop 최적화 - 부드러운 드래그 동작 */
  [data-rbd-draggable-context-id] {
    will-change: transform;
  }

  /* 드래그 중인 요소의 부드러운 이동 */
  [data-rbd-drag-handle-draggable-id] {
    touch-action: none;
    -webkit-tap-highlight-color: transparent;
  }

  /* 드래그 가능한 요소에 커서 표시 */
  [data-rbd-drag-handle-draggable-id]:not([data-rbd-drag-handle-draggable-id*="todo-"]):not([data-rbd-drag-handle-draggable-id*="tax-"]) {
    cursor: grab;
  }

  [data-rbd-drag-handle-draggable-id]:not([data-rbd-drag-handle-draggable-id*="todo-"]):not([data-rbd-drag-handle-draggable-id*="tax-"]):active {
    cursor: grabbing;
  }

  /* 드래그 중인 요소 (실제로 움직이는 요소) */
  [data-rbd-draggable-id][data-rbd-dragging-over] {
    pointer-events: auto !important;
  }

  /* 드래그 플레이스홀더 스타일 */
  [data-rbd-placeholder-context-id] {
    opacity: 0.5;
  }
}
